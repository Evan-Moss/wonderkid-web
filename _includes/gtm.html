<!-- Global site tag (gtag.js) - Google Analytics -->
<script src="https://www.googletagmanager.com/gtag/js?id=G-0GYXY70PKJ"></script>
<script src="https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv4.min.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  const GA_LOCAL_STORAGE_KEY = 'ga:clientID';

  if (window.localStorage){
    if (localStorage.getItem(GA_LOCAL_STORAGE_KEY)){
      gtag('js', new Date());
      gtag('config', 'G-0GYXY70PKJ', {
        send_page_view: true,
        analytics_storage: 'denied',
        ad_storage: 'denied',
        ads_data_redaction: true,
        client_id: localStorage.getItem(GA_LOCAL_STORAGE_KEY),
      });
    } else {
      window.localStorage.setItem(GA_LOCAL_STORAGE_KEY, uuidv4());

      gtag('js', new Date());
      gtag('config', 'G-0GYXY70PKJ', {
        send_page_view: true,
        analytics_storage: 'denied',
        ad_storage: 'denied',
        ads_data_redaction: true,
        client_id: localStorage.getItem(GA_LOCAL_STORAGE_KEY),
      });
    }
  }
</script>
